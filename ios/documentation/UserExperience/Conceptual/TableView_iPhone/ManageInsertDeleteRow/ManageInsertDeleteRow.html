<!DOCTYPE html>
<html lang="en">
<head>
    <title>Table View Programming Guide for iOS: Inserting and Deleting Rows and Sections</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40007451">
	<meta id="document-version" name="document-version" content="5.0.0">
    <meta id="build" name="build" content="bcf073e0579478458b78c3b3068a2133">
    <meta id="chapterId" name="chapterId" content="TP40007451-CH10">
    <meta id="date" name="date" content="2013-09-18">
    <meta id="description" name="description" content="Describes how to create and manage table views for applications running iOS.">
    <meta id="book-title" name="book-title" content="Table View Programming Guide for iOS">
    <meta id="book-name" name="book-name" content="TableView_iPhone">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="iOS Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/ios">
    <meta id="reflib" name="reflib" content="iOS Developer Library">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Framework/Cocoa Touch Layer/UIKit}, {Topic/User Experience/Tables}">
    <meta name="pdf" contents="../TableView_iPhone.pdf" /><link id="book-pdf" media="print" rel="alternate" type="application/pdf" href="../TableView_iPhone.pdf" />
    
    <meta id="generator" name="generator" content="Gutenberg 003a3034">
    <meta name='numbat' content='aa879094b666337fdcde744b62fbff30'>
    <meta id="copyright" name="copyright" content="Copyright 2014 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Inserting and Deleting Rows and Sections">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/874">
    <link id="book-index-page" rel="Start" title="Table View Programming Guide for iOS" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="../ManageReorderRow/ManageReorderRow.html">
    <link id="previous-page" rel="Prev" type="text/html" href="../ManageSelections/ManageSelections.html">
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/874/CSS/screen.css">
    
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/874/CSS/feedback.css">
</head>    
<body><a name="//apple_ref/doc/uid/TP40007451-CH10" title="Inserting and Deleting Rows and Sections"></a>
    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode phone">
            <a id="ssi_LibraryTitle" href='../../../../../navigation/index.html'>iOS Developer Library</a>
            <a id="ssi_AppleDeveloperConnection" href='../../../../../../../index.html'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search iOS Developer Library</label>
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Table View Programming Guide for iOS</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../ManageReorderRow/ManageReorderRow.html'>Next</a><a class='previousLink' rel='prev' href='../ManageSelections/ManageSelections.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40007451-CH10-SW1" title="Inserting and Deleting Rows and Sections"></a><h1 id="pageTitle">Inserting and Deleting Rows and Sections</h1><p>A table view has an editing mode as well as its normal (selection) mode. When a table view goes into editing mode, it displays the editing and reordering controls associated with its rows. The editing controls, which are in the left side of the row, allow the user to insert and delete rows in the table view. The editing controls have distinctive appearances: </p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><td  scope="row"><p><img src="../Art/deletion_control.jpg" alt="deletion control" width="50" height="50"></p></td><td ><p>Deletion control</p></td></tr><tr><td  scope="row"><p><img src="../Art/insertion_control.jpg" alt="insertion control" width="50" height="50"></p></td><td ><p>Insertion control</p></td></tr></table></div><p>When a table view enters editing mode and when users click an editing control, the table view sends a series of messages to its <span class="pediaLink" data-header="Delegation" data-contents="Delegation is a simple and powerful pattern in which one object in a program acts on behalf of, or in coordination with, another object. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Delegation.html#/apple_ref/doc/uid/TP40008195-CH14" target="_self">data source and delegate</a></span>, but only if they implement these methods. These methods allow the data source and delegate to refine the appearance and behavior of rows in the table view; the messages also enable them to carry out the deletion or insertion operation. </p><p>Even if a table view is not in editing mode, you can insert or delete a number of rows or sections as a group and have those operations animated.</p><p>The first section below shows you how, when a table is in editing mode, to insert new rows and delete existing rows in a table view in response to user actions. The second section, <span class="content_text"><a href="ManageInsertDeleteRow.html#/apple_ref/doc/uid/TP40007451-CH10-SW9">“Batch Insertion, Deletion, and Reloading of Rows and Sections,”</a></span> discusses how you can insert and delete multiple sections and rows animated as a group.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40007451-CH10-SW10" title="Note"></a><p><strong>Note:</strong>&nbsp;The procedure for reordering rows when in editing mode is described in <span class="content_text"><a href="../ManageReorderRow/ManageReorderRow.html#/apple_ref/doc/uid/TP40007451-CH11-SW1">“Managing the Reordering of Rows.”</a></span></p><p></p></aside></div><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW19" title="Inserting and Deleting Rows in Editing Mode"></a><h2 class="jump">Inserting and Deleting Rows in Editing Mode</h2><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW2" title="When a Table View is Edited"></a><h3 class="jump">When a Table View is Edited</h3><p>A table view goes into editing mode when it receives a <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/setEditing:animated:" target="_self">setEditing:animated:</a></code> message. Typically (but not necessarily) the message originates as an action message sent when the user taps an Edit button in the navigation bar. In editing mode, a table view displays any editing (and reordering) controls that its <span class="pediaLink" data-header="Delegation" data-contents="Delegation is a simple and powerful pattern in which one object in a program acts on behalf of, or in coordination with, another object. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Delegation.html#/apple_ref/doc/uid/TP40008195-CH14" target="_self">delegate</a></span> has assigned to each row. The delegate assigns the controls as a result of returning the editing style for a row in the <code><a href="../../../../UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDelegate/tableView:editingStyleForRowAtIndexPath:" target="_self">tableView:editingStyleForRowAtIndexPath:</a></code> method. </p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40007451-CH10-SW11" title="Note"></a><p><strong>Note:</strong>&nbsp;If a <code><a href="../../../../UIKit/Reference/UIViewController_Class/Reference/Reference.html#/apple_ref/occ/cl/UIViewController" target="_self">UIViewController</a></code> object is managing the table view, it automatically receives a <code>setEditing:animated:</code> message when the Edit button is tapped. In its implementation of this message, it can update button state or do any other kind of task before invoking the table view’s version of the method.</p><p></p></aside></div><p>When the table view receives <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/setEditing:animated:" target="_self">setEditing:animated:</a></code>, it sends the same message to the <code><a href="../../../../UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#/apple_ref/occ/cl/UITableViewCell" target="_self">UITableViewCell</a></code> object for each visible row. Then it sends a succession of messages to its data source and its delegate (if they implement the methods) as depicted in the diagram in <span class="content_text">Figure 7-1</span>. </p><figure class="figure"><a name="//apple_ref/doc/uid/TP40007451-CH10-SW3" title="Figure 7-1Calling sequence for inserting or deleting rows in a table view"></a><figcaption><strong class="caption_number">Figure 7-1</strong>&nbsp;&nbsp;Calling sequence for inserting or deleting rows in a table view</figcaption><img src="../Art/table_view_editing.jpg" alt="Calling sequence for inserting or deleting rows in a table view" width="657" height="405"></figure><p>After resending <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/setEditing:animated:" target="_self">setEditing:animated:</a></code> to the cells corresponding to the visible rows, the sequence of messages is as follows:</p><ol class="ol"><li class="li"><p>The table view invokes the <code><a href="../../../../UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDataSource/tableView:canEditRowAtIndexPath:" target="_self">tableView:canEditRowAtIndexPath:</a></code> method if its data source implements it. This method allows the application to exclude rows in the table view from being edited even when their cell’s <code><a href="../../../../UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#/apple_ref/occ/instp/UITableViewCell/editingStyle" target="_self">editingStyle</a></code> property indicates otherwise. Most applications do not need to implement this method.</p></li><li class="li"><p>The table view invokes the <code><a href="../../../../UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDelegate/tableView:editingStyleForRowAtIndexPath:" target="_self">tableView:editingStyleForRowAtIndexPath:</a></code> method if its delegate implements it. This method allows the application to specify a row’s editing style and thus the editing control that the row displays.</p><p>At this point, the table view is fully in editing mode. It displays the insertion or deletion control for each eligible row. </p></li><li class="li"><p>The user taps an editing control (either the deletion control or the insertion control). If he or she taps a deletion control, a Delete button is displayed on the row. The user then taps that button to confirm the deletion.</p></li><li class="li"><p>The table view sends the <code><a href="../../../../UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDataSource/tableView:commitEditingStyle:forRowAtIndexPath:" target="_self">tableView:commitEditingStyle:forRowAtIndexPath:</a></code> message to the data source. Although this <span class="pediaLink" data-header="Protocol" data-contents="A protocol declares a programmatic interface that any class may choose to implement. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Protocol.html#/apple_ref/doc/uid/TP40008195-CH45" target="_self">protocol</a></span> method is marked as optional, the data source must implement it if it wants to insert or delete a row. It must do two things:</p><ul class="ul"><li class="li"><p>Send <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths:withRowAnimation:" target="_self">deleteRowsAtIndexPaths:withRowAnimation:</a></code> or <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths:withRowAnimation:" target="_self">insertRowsAtIndexPaths:withRowAnimation:</a></code> to the table view to direct it to adjust its presentation.</p></li><li class="li"><p>Update the corresponding data-model array by either deleting the referenced item from the array or adding an item to the array.</p></li></ul></li></ol><p>When the user swipes across a row to display the Delete button for that row, there is a variation in the calling sequence diagrammed in <span class="content_text"><a href="ManageInsertDeleteRow.html#/apple_ref/doc/uid/TP40007451-CH10-SW3">Figure 7-1</a></span>. When the user swipes a row to delete it, the table view first checks to see if its data source has implemented the <code><a href="../../../../UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDataSource/tableView:commitEditingStyle:forRowAtIndexPath:" target="_self">tableView:commitEditingStyle:forRowAtIndexPath:</a></code> method; if that is so, it sends <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/setEditing:animated:" target="_self">setEditing:animated:</a></code> to itself and enters editing mode. In this “swipe to delete” mode, the table view does not display the editing and reordering controls. Because this is a user-driven event, it also brackets the messages to the delegate inside of two other messages: <code><a href="../../../../UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDelegate/tableView:willBeginEditingRowAtIndexPath:" target="_self">tableView:willBeginEditingRowAtIndexPath:</a></code> and <code><a href="../../../../UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDelegate/tableView:didEndEditingRowAtIndexPath:" target="_self">tableView:didEndEditingRowAtIndexPath:</a></code>. By implementing these methods, the delegate can update the appearance of the table view appropriately.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40007451-CH10-SW21" title="Note"></a><p><strong>Note:</strong>&nbsp;The data source should not call <code>setEditing:animated:</code> from within its implementation of <code>tableView:commitEditingStyle:forRowAtIndexPath:</code>. If for some reason it must, it should invoke it after a delay by using the <code><a href="../../../../Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#/apple_ref/occ/instm/NSObject/performSelector:withObject:afterDelay:" target="_self">performSelector:withObject:afterDelay:</a></code> method.</p><p></p></aside></div><p>Although you can use an insertion control as the trigger to insert a new row in a table view, an alternative approach is to have an Add (or plus sign) button in the navigation bar. Tapping the button sends an action message to the view controller, which overlays the table view with a modal view for entering the new item. Once the item is entered, the controller adds it to the data-model array and reloads the table. <span class="content_text"><a href="ManageInsertDeleteRow.html#/apple_ref/doc/uid/TP40007451-CH10-SW5">“An Example of Adding a Table-View Row”</a></span> discusses this approach.</p></section><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW4" title="An Example of Deleting a Table-View Row"></a><h3 class="jump">An Example of Deleting a Table-View Row</h3><p>This section gives a guided tour through the parts of a project that work together to set up a table view for editing mode and delete rows from it. This project uses the navigation controller and <span class="pediaLink" data-header="Controller object" data-contents="A controller object acts as a coordinator or as an intermediary between one or more view objects and one or more model objects. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/ControllerObject.html#/apple_ref/doc/uid/TP40008195-CH11" target="_self">view controller</a></span> architecture to manage its table views. In its <code><a href="../../../../UIKit/Reference/UIViewController_Class/Reference/Reference.html#/apple_ref/occ/instm/UIViewController/loadView" target="_self">loadView</a></code> method, the custom view controller creates the table view and sets itself to be the <span class="pediaLink" data-header="Delegation" data-contents="Delegation is a simple and powerful pattern in which one object in a program acts on behalf of, or in coordination with, another object. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Delegation.html#/apple_ref/doc/uid/TP40008195-CH14" target="_self">data source and delegate</a></span>. It also sets the right item of the navigation bar to be the standard Edit button. </p><div class="codesample clear"><table><tr><td scope="row"><pre>self.navigationItem.rightBarButtonItem = self.editButtonItem;<span></span></pre></td></tr></table></div><p>This button is preconfigured to send <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/setEditing:animated:" target="_self">setEditing:animated:</a></code> to the view controller when tapped; it toggles the button title (between Edit and Done) and the Boolean <em>editing</em> parameter on alternating taps. In its implementation of the method, as shown in <span class="content_text">Listing 7-1</span>, the view controller invokes the superclass invocation of the method, sends the same message to the table view, and updates the enabled state of the other button in the navigation bar (a plus-sign button, for adding items).</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW6" title="Listing 7-1View controller responding to setEditing:animated:"></a><p class="codesample clear"><strong class="caption_number">Listing 7-1</strong>&nbsp;&nbsp;View controller responding to <code>setEditing:animated:</code></p><div class="codesample clear"><table><tr><td scope="row"><pre>- (void)setEditing:(BOOL)editing animated:(BOOL)animated {<span></span></pre></td></tr><tr><td scope="row"><pre>    [super setEditing:editing animated:animated];<span></span></pre></td></tr><tr><td scope="row"><pre>    [tableView setEditing:editing animated:YES];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (editing) {<span></span></pre></td></tr><tr><td scope="row"><pre>        addButton.enabled = NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    } else {<span></span></pre></td></tr><tr><td scope="row"><pre>        addButton.enabled = YES;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>When its table view enters editing mode, the view controller specifies a deletion control for every row except the last, which has an insertion control. It does this in its implementation of the <code><a href="../../../../UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDelegate/tableView:editingStyleForRowAtIndexPath:" target="_self">tableView:editingStyleForRowAtIndexPath:</a></code> method (<span class="content_text">Listing 7-2</span>).</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW7" title="Listing 7-2Customizing the editing style of rows"></a><p class="codesample clear"><strong class="caption_number">Listing 7-2</strong>&nbsp;&nbsp;Customizing the editing style of rows</p><div class="codesample clear"><table><tr><td scope="row"><pre>- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {<span></span></pre></td></tr><tr><td scope="row"><pre>    SimpleEditableListAppDelegate *controller = (SimpleEditableListAppDelegate *)[[UIApplication sharedApplication] delegate];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (indexPath.row == [controller countOfList]-1) {<span></span></pre></td></tr><tr><td scope="row"><pre>        return UITableViewCellEditingStyleInsert;<span></span></pre></td></tr><tr><td scope="row"><pre>    } else {<span></span></pre></td></tr><tr><td scope="row"><pre>        return UITableViewCellEditingStyleDelete;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The user taps the deletion control in a row and the view controller receives a <code><a href="../../../../UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDataSource/tableView:commitEditingStyle:forRowAtIndexPath:" target="_self">tableView:commitEditingStyle:forRowAtIndexPath:</a></code> message from the table view. As shown in <span class="content_text">Listing 7-3</span>, it handles this message by removing the item corresponding to the row from a model array and sending <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths:withRowAnimation:" target="_self">deleteRowsAtIndexPaths:withRowAnimation:</a></code> to the table view.</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW8" title="Listing 7-3Updating the data-model array and deleting the row"></a><p class="codesample clear"><strong class="caption_number">Listing 7-3</strong>&nbsp;&nbsp;Updating the data-model array and deleting the row</p><div class="codesample clear"><table><tr><td scope="row"><pre>- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {<span></span></pre></td></tr><tr><td scope="row"><pre>    // If row is deleted, remove it from the list.<span></span></pre></td></tr><tr><td scope="row"><pre>    if (editingStyle == UITableViewCellEditingStyleDelete) {<span></span></pre></td></tr><tr><td scope="row"><pre>        SimpleEditableListAppDelegate *controller = (SimpleEditableListAppDelegate *)[[UIApplication sharedApplication] delegate];<span></span></pre></td></tr><tr><td scope="row"><pre>        [controller removeObjectFromListAtIndex:indexPath.row];<span></span></pre></td></tr><tr><td scope="row"><pre>        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW5" title="An Example of Adding a Table-View Row"></a><h3 class="jump">An Example of Adding a Table-View Row</h3><p>This section shows project code that inserts a row in a table view. Instead of using the insertion control as the trigger for inserting a row, it uses an Add button (visually a plus sign) in the navigation bar above the table view.  This code also is based on the navigation controller and view controller architecture. In its <code><a href="../../../../UIKit/Reference/UIViewController_Class/Reference/Reference.html#/apple_ref/occ/instm/UIViewController/loadView" target="_self">loadView</a></code> method implementation, the view controller assigns the Add button as the right-side item of the navigation bar using the code shown in <span class="content_text">Listing 7-4</span>.</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW12" title="Listing 7-4Adding an Add button to the navigation bar"></a><p class="codesample clear"><strong class="caption_number">Listing 7-4</strong>&nbsp;&nbsp;Adding an Add button to the navigation bar</p><div class="codesample clear"><table><tr><td scope="row"><pre>    addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addItem:)];<span></span></pre></td></tr><tr><td scope="row"><pre>    self.navigationItem.rightBarButtonItem = addButton;<span></span></pre></td></tr></table></div><p>Note that the view controller sets the control states for the title as well as the action <span class="pediaLink" data-header="Selector" data-contents="A selector is the name used to select a method to execute for an object, or the unique identifier that replaces the name when the source code is compiled. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Selector.html#/apple_ref/doc/uid/TP40008195-CH48" target="_self">selector</a></span> and the target object. When the user taps the Add button, the <code>addItem:</code> message is sent to the target (the view controller). It responds as shown in <span class="content_text">Listing 7-5</span>. It creates a navigation controller with a single view controller whose view is put onscreen modally—it animates upward to overlay the table view. The <code><a href="../../../../UIKit/Reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#/apple_ref/occ/instm/UIViewController/presentModalViewController:animated:" target="_self">presentModalViewController:animated:</a></code> method to do this.</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW13" title="Listing 7-5Responding to a tap on the Add button"></a><p class="codesample clear"><strong class="caption_number">Listing 7-5</strong>&nbsp;&nbsp;Responding to a tap on the Add button</p><div class="codesample clear"><table><tr><td scope="row"><pre>- (void)addItem:sender {<span></span></pre></td></tr><tr><td scope="row"><pre>    if (itemInputController == nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>        itemInputController = [[ItemInputController alloc] init];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:itemInputController];<span></span></pre></td></tr><tr><td scope="row"><pre>    [[self navigationController] presentModalViewController:navigationController animated:YES];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The modal, or overlay, view consists of a single custom text field. The user enters text for the new table-view item and then taps a Save button. This button sends a <code>save:</code> action message to its target: the view controller for the modal view. As shown in <span class="content_text">Listing 7-6</span>, the view controller extracts the string value from the text field and updates the application’s data-model array with it.</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW14" title="Listing 7-6Adding the new item to the data-model array"></a><p class="codesample clear"><strong class="caption_number">Listing 7-6</strong>&nbsp;&nbsp;Adding the new item to the data-model array</p><div class="codesample clear"><table><tr><td scope="row"><pre>- (void)save:sender {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    UITextField *textField = [(EditableTableViewTextField *)[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]] textField];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    SimpleEditableListAppDelegate *controller = (SimpleEditableListAppDelegate *)[[UIApplication sharedApplication] delegate];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *newItem = textField.text;<span></span></pre></td></tr><tr><td scope="row"><pre>    if (newItem != nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>            [controller insertObject:newItem inListAtIndex:[controller countOfList]];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    [self dismissModalViewControllerAnimated:YES];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>After the modal view is dismissed the table view is reloaded, and it now reflects the added item.</p></section></section><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW9" title="Batch Insertion, Deletion, and Reloading of Rows and Sections"></a><h2 class="jump">Batch Insertion, Deletion, and Reloading of Rows and Sections</h2><p>The <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/cl/UITableView" target="_self">UITableView</a></code> class allows you to insert, delete, and reload a group of rows or sections at one time, animating the operations simultaneously in specified ways. The eight methods shown in <span class="content_text">Listing 7-7</span> pertain to batch insertion and deletion. Note that you can call these insertion and deletion methods outside of an animation block (as you do in the data source method <code><a href="../../../../UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#/apple_ref/occ/intfm/UITableViewDataSource/tableView:commitEditingStyle:forRowAtIndexPath:" target="_self">tableView:commitEditingStyle:forRowAtIndexPath:</a></code> as discussed in <span class="content_text"><a href="ManageInsertDeleteRow.html#/apple_ref/doc/uid/TP40007451-CH10-SW19">“Inserting and Deleting Rows in Editing Mode”</a></span>). </p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW15" title="Listing 7-7Batch insertion and deletion methods"></a><p class="codesample clear"><strong class="caption_number">Listing 7-7</strong>&nbsp;&nbsp;Batch insertion and deletion methods</p><div class="codesample clear"><table><tr><td scope="row"><pre>- (void)beginUpdates;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)endUpdates;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)insertSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)deleteSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation: (UITableViewRowAnimation)animation;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation: (UITableViewRowAnimation)animation;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40007451-CH10-SW22" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/reloadSections:withRowAnimation:" target="_self">reloadSections:withRowAnimation:</a></code> and <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/reloadRowsAtIndexPaths:withRowAnimation:" target="_self">reloadRowsAtIndexPaths:withRowAnimation:</a></code> methods, which were introduced in iOS 3.0, allow you to request the table view to reload the data for specific sections and rows instead of loading the entire visible table view by calling <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/reloadData" target="_self">reloadData</a></code>.</p><p></p></aside></div><p>To animate a batch insertion, deletion, and reloading of rows and sections, call the corresponding methods within an animation block defined by successive calls to <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/beginUpdates" target="_self">beginUpdates</a></code> and <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/endUpdates" target="_self">endUpdates</a></code>. If you don’t call the insertion, deletion, and reloading methods within this block, row and section indexes may be invalid. Calls to <code>beginUpdates</code> and <code>endUpdates</code> can be nested; all indexes are treated as if there were only the outer update block.</p><p>At the conclusion of a block—that is, after <code>endUpdates</code> returns—the table view queries its <span class="pediaLink" data-header="Delegation" data-contents="Delegation is a simple and powerful pattern in which one object in a program acts on behalf of, or in coordination with, another object. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Delegation.html#/apple_ref/doc/uid/TP40008195-CH14" target="_self">data source and delegate</a></span> as usual for row and section data. Thus the <span class="pediaLink" data-header="Collection" data-contents="A collection is a Foundation framework object whose primary role is to store objects in the form of arrays, dictionaries, and sets. "><a href="../../../../General/Conceptual/DevPedia-CocoaCore/Collection.html#/apple_ref/doc/uid/TP40008195-CH10" target="_self">collection</a></span> objects backing the table view should be updated to reflect the new or removed rows or sections.</p><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW20" title="An Example of Batched Insertion and Deletion Operations"></a><h3 class="jump">An Example of Batched Insertion and Deletion Operations</h3><p>To insert and delete a group of rows and sections in a table view, first prepare the array (or arrays) that are the source of data for the sections and rows. After rows and sections are deleted and inserted, the resulting rows and sections are populated from this data store. </p><p>Next, call the <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/beginUpdates" target="_self">beginUpdates</a></code> method, followed by invocations of <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths:withRowAnimation:" target="_self">insertRowsAtIndexPaths:withRowAnimation:</a></code>, <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths:withRowAnimation:" target="_self">deleteRowsAtIndexPaths:withRowAnimation:</a></code>, <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/insertSections:withRowAnimation:" target="_self">insertSections:withRowAnimation:</a></code>, or <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/deleteSections:withRowAnimation:" target="_self">deleteSections:withRowAnimation:</a></code>. Conclude the animation block by calling <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/endUpdates" target="_self">endUpdates</a></code>. <span class="content_text">Listing 7-8</span> illustrates this procedure.</p><a name="//apple_ref/doc/uid/TP40007451-CH10-SW16" title="Listing 7-8Inserting and deleting a block of rows in a table view"></a><p class="codesample clear"><strong class="caption_number">Listing 7-8</strong>&nbsp;&nbsp;Inserting and deleting a block of rows in a table view</p><div class="codesample clear"><table><tr><td scope="row"><pre>- (IBAction)insertAndDeleteRows:(id)sender {<span></span></pre></td></tr><tr><td scope="row"><pre>    // original rows: Arizona, California, Delaware, New Jersey, Washington<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [states removeObjectAtIndex:4]; // Washington<span></span></pre></td></tr><tr><td scope="row"><pre>    [states removeObjectAtIndex:2]; // Delaware<span></span></pre></td></tr><tr><td scope="row"><pre>    [states insertObject:@"Alaska" atIndex:0];<span></span></pre></td></tr><tr><td scope="row"><pre>    [states insertObject:@"Georgia" atIndex:3];<span></span></pre></td></tr><tr><td scope="row"><pre>    [states insertObject:@"Virginia" atIndex:5];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *deleteIndexPaths = [NSArray arrayWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>                                [NSIndexPath indexPathForRow:2 inSection:0],<span></span></pre></td></tr><tr><td scope="row"><pre>                                [NSIndexPath indexPathForRow:4 inSection:0],<span></span></pre></td></tr><tr><td scope="row"><pre>                                nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *insertIndexPaths = [NSArray arrayWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>                                [NSIndexPath indexPathForRow:0 inSection:0],<span></span></pre></td></tr><tr><td scope="row"><pre>                                [NSIndexPath indexPathForRow:3 inSection:0],<span></span></pre></td></tr><tr><td scope="row"><pre>                                [NSIndexPath indexPathForRow:5 inSection:0],<span></span></pre></td></tr><tr><td scope="row"><pre>                                nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    UITableView *tv = (UITableView *)self.view;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [tv beginUpdates];<span></span></pre></td></tr><tr><td scope="row"><pre>    [tv insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationRight];<span></span></pre></td></tr><tr><td scope="row"><pre>    [tv deleteRowsAtIndexPaths:deleteIndexPaths withRowAnimation:UITableViewRowAnimationFade];<span></span></pre></td></tr><tr><td scope="row"><pre>    [tv endUpdates];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // ending rows: Alaska, Arizona, California, Georgia, New Jersey, Virginia<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>This example removes two strings from an array (and their corresponding rows) and inserts three strings into the array (along with their corresponding rows). The next section, <span class="content_text">“Ordering of Operations and Index Paths,”</span> explains particular aspects of the row (or section) insertion and deletion behavior.</p></section><section><a name="//apple_ref/doc/uid/TP40007451-CH10-SW17" title="Ordering of Operations and Index Paths"></a><h3 class="jump">Ordering of Operations and Index Paths</h3><p>You might have noticed something in the code shown in <span class="content_text">Listing 7-8</span> that seems peculiar. The code calls the <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths:withRowAnimation:" target="_self">deleteRowsAtIndexPaths:withRowAnimation:</a></code> method after it calls <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths:withRowAnimation:" target="_self">insertRowsAtIndexPaths:withRowAnimation:</a></code>. However, this is not the order in which <code><a href="../../../../UIKit/Reference/UITableView_Class/Reference/Reference.html#/apple_ref/occ/cl/UITableView" target="_self">UITableView</a></code> completes the operations. It defers any insertions of rows or sections until after it has handled the deletions of rows or sections. The table view behaves the same way with reloading methods called inside an update block—the reload takes place with respect to the indexes of rows and sections before the animation block is executed. This behavior happens regardless of the ordering of the insertion, deletion, and reloading method calls. </p><p>Deletion and reloading operations within an animation block specify which rows and sections in the original table should be removed or reloaded; insertions specify which rows and sections should be added to the resulting table. The index paths used to identify sections and rows follow this model. Inserting or removing an item in a mutable array, on the other hand, may affect the array index used for the successive insertion or removal operation; for example, if you insert an item at a certain index, the indexes of all subsequent items in the array are incremented. </p><p>An example is useful here. Say you have a table view with three sections, each with three rows. Then you implement the following animation block:</p><ol class="ol"><li class="li"><p>Begin updates.</p></li><li class="li"><p>Delete row at index 1 of section at index 0.</p></li><li class="li"><p>Delete section at index 1.</p></li><li class="li"><p>Insert row at index 1 of section at index 1.</p></li><li class="li"><p>End updates.</p></li></ol><p><span class="content_text">Figure 7-2</span> illustrates what takes place after the animation block concludes.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40007451-CH10-SW18" title="Figure 7-2Deletion of section and row and insertion of row"></a><figcaption><strong class="caption_number">Figure 7-2</strong>&nbsp;&nbsp;Deletion of section and row and insertion of row</figcaption><img src="../Art/batch_insert_delete.jpg" alt="Deletion of section and row and insertion of row" width="472" height="299"></figure></section></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../ManageReorderRow/ManageReorderRow.html'>Next</a><a class='previousLink' rel='prev' href='../ManageSelections/ManageSelections.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2013 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2013-09-18</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <input id="email" type="email" name="email" placeholder="Email (optional)" size="48">

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="../../../../../../../bug-reporting/index.html" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../../Resources/874/JavaScript/lib/prototype.js"></script>
    <script src="../../../../../Resources/874/JavaScript/library.js"></script>
    <script src="../../../../../Resources/874/JavaScript/feedback.js"></script>
</body>
<script type="text/javascript" src="../../../../../../webstats/pagetracker.js"></script>
<script type="text/javascript">
if(typeof PageTracker !== 'undefined') {
  if(window.addEventListener) {
    window.addEventListener("load", function(){PageTracker.logPageLoad()},false);
  } else if(window.attachEvent) {
    window.attachEvent("onload",function(){PageTracker.logPageLoad()});
  }
}
</script>
</html>
