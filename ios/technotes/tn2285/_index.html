<!DOCTYPE html>
<html lang="en">
<head>
    <title>Technical Note TN2285: Testing iOS App Updates</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Technical Note">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/DTS40011323">
	<meta id="document-version" name="document-version" content="1.1.0">
    <meta id="build" name="build" content="bcf073e0579478458b78c3b3068a2133">
    <meta id="chapterId" name="chapterId" content="DTS40011323-CH1">
    <meta id="date" name="date" content="2013-02-13">
    <meta id="description" name="description" content="TN2285: discusses some best practices for testing an update to an iOS app that has already been deployed through the App Store.">
    <meta id="book-title" name="book-title" content="Testing iOS App Updates">
    <meta id="book-name" name="book-name" contents="DTS_TN2285_TestingiOSAppUpd">
    <meta id="book-root" name="book-root" content="./">
    <meta id="book-json" name="book-json" content="book.json">
    <meta id="devcenter" name="devcenter" content="iOS Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/ios">
    <meta id="reflib" name="reflib" content="iOS Developer Library">
    <meta id="book-assignments" name="book-assignments" content="{Type/Technical Note}, {Topic/General}">
    
    
    <meta id="generator" name="generator" content="Gutenberg 003a3034">
    <meta name='numbat' content='aa879094b666337fdcde744b62fbff30'>
    <meta id="copyright" name="copyright" content="Copyright 2014 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Technical Note TN2285">
    <meta id="resources-uri" name="resources-uri" content="../../Resources/874">
    <link id="book-index-page" rel="Start" title="Testing iOS App Updates" type="text/html" href="index.html">
    <link id="next-page" rel="Next" type="text/html" href="">
    <link id="previous-page" rel="Prev" type="text/html" href="">
    <link rel="stylesheet" type="text/css" href="../../Resources/874/CSS/screen.css">
    
    <link rel="stylesheet" type="text/css" href="../../Resources/874/CSS/feedback.css">
</head>    
<body><a name="//apple_ref/doc/uid/DTS40011323" title="Technical Note TN2285"></a>
    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode phone">
            <a id="ssi_LibraryTitle" href='../../navigation/index.html'>iOS Developer Library</a>
            <a id="ssi_AppleDeveloperConnection" href='../../../../index.html'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search iOS Developer Library</label>
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Testing iOS App Updates</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main" class="dts_doc">
        <!-- CONTENTS -->
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/DTS40011323-CH1-DontLinkElementID_2" title="Technical Note TN2285"></a><div class="dtsDocNumber">Technical Note TN2285</div><h1 id="pageTitle">Testing iOS App Updates</h1><p>This technote discusses how to test an update to an iOS app that has already been deployed through the App Store. General testing methodology is beyond the scope of this technote.</p>

   
    <div class="outerMiniTOC">

        
			
            <div>
                <a href="_index.html#/apple_ref/doc/uid/DTS40011323-CH1-HOWITSDONE">Recommended Testing Procedure</a>
                
                
                
            </div>
            
        
			
            <div>
                <a href="_index.html#/apple_ref/doc/uid/DTS40011323-CH1-BUILDIT">Archive and Distribute</a>
                
                
                
            </div>
            
        
			
            <div>
                <a href="_index.html#/apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS">Common Problems to Look For</a>
                
                
                
                    <div class="nestedMiniTOC">
                    
                        
                        <div>
                            <a href="_index.html#/apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS-RECEIVING_PUSH_NOTIFICATIONS">Receiving Push Notifications</a>
                            
                        </div>
                        
                    
                        
                        <div>
                            <a href="_index.html#/apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS-CORE_DATA">Core Data</a>
                            
                        </div>
                        
                    
                    </div>
                
            </div>
            
        
			
            <div>
                <a href="_index.html#/apple_ref/doc/uid/DTS40011323-CH1-DEBUGGING">Debugging Ad Hoc Builds</a>
                
                
                
            </div>
            
        
			
            <div>
                <a href="_index.html#/apple_ref/doc/uid/DTS40011323-RevisionHistory-DontLinkElementID_1">Document Revision History</a>
                
                
                
            </div>
            
        
    </div>

<section><a name="//apple_ref/doc/uid/DTS40011323-CH1-HOWITSDONE" title="Recommended Testing Procedure"></a><h2 class="jump">Recommended Testing Procedure</h2><p>Install an ad hoc distribution of an archived build of the update using iTunes on a device that already has the old version of the app installed.</p><div class="warningbox clear"><aside><a name="//apple_ref/doc/uid/DTS40011323-CH1-DontLinkElementID_3" title="Warning"></a><p><strong>Warning:</strong>&nbsp;Do not use Xcode to install or run updates to your app for quality assurance testing.</p><p></p><div class="clear"></div></aside></div><p>To make the development cycle faster, Xcode only pushes changed files into the apps it runs, and does not delete files from existing app-bundles. This makes builds significantly faster. But it means that using Xcode to install an app over an older old build can make a "frankenbuild" with legacy files it wouldn't otherwise have. This can cause problems during testing and mask bugs.</p><p>Additionally, running with Xcode will mask "<span class="content_text"><a href="../../index.html#qa/qa1592/_index.html" class="browserLink" >watchdog crashes</a></span>"  that can happen if an upgrade takes too long to launch.</p><div class="back_to_top"><a href="_index.html#top">Back to Top</a></div></section><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-BUILDIT" title="Archive and Distribute"></a><h2 class="jump">Archive and Distribute</h2><p><strong>1)</strong> In Xcode choose "Archive" from the "Product" menu to archive a build of your app. You can find the archive in the Archives tab in the Organizer window.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/DTS40011323-CH1-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;If you have problems with this step, see <span class="content_text"><a href="../tn2215/index.html" class="urlLink" rel="external">Troubleshooting application archiving in Xcode</a></span>.</p><p></p></aside></div><p><strong>2)</strong> Package the build as an "Ad Hoc" .ipa file by selecting it in the Organizer window and pressing "Distributeâ€¦"; then select "Save for Enterprise or Ad-Hoc Deployment". Choose any "Code Signing Identity:" that will let you install on your test device.</p><div class="warningbox clear"><aside><a name="//apple_ref/doc/uid/DTS40011323-CH1-DontLinkElementID_5" title="Warning"></a><p><strong>Warning:</strong>&nbsp;Do <strong>not</strong> choose your App Store Distribution profile for this step. It will sign the .ipa file so it can only be used by the App Store, preventing you from installing it yourself and testing.</p><p></p><div class="clear"></div></aside></div><p><strong>3)</strong> Test updating to that build by opening the .ipa file with iTunes and syncing to install it on a device that has the previous version of your app installed. Be sure you've used the previous version of the app enough that it's saved any data it might save during use. The most common problem updates have is not properly dealing with data created by the previous version of the app.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/DTS40011323-CH1-DontLinkElementID_6" title="Note"></a><p><strong>Note:</strong>&nbsp;If you have trouble installing the .ipa file, see the <span class="content_text"><a href="../../../../legacy/library/technotes/tn2250/_index.html#/apple_ref/doc/uid/DTS40009933-CH1-TNTAG42" class="urlLink" rel="external">Installation Troubleshooting</a></span> steps  in "Technical Note TN2250: iOS Code Signing Troubleshooting".</p><p></p></aside></div><div class="back_to_top"><a href="_index.html#top">Back to Top</a></div></section><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS" title="Common Problems to Look For"></a><h2 class="jump">Common Problems to Look For</h2><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS-RECEIVING_PUSH_NOTIFICATIONS" title="Receiving Push Notifications"></a><h3 class="jump">Receiving Push Notifications</h3><p>If your app stops receiving push notifications after an update, it may have been built using a misconfigured provisioning profile. See <span class="content_text"><a href="../tn2265/_index.html#/apple_ref/doc/uid/DTS40010376-CH1-TNTAG2" class="browserLink" >Troubleshooting Push Notifications</a></span> for more information.</p></section><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS-CORE_DATA" title="Core Data"></a><h3 class="jump">Core Data</h3><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS_CORE_DATA-OBJECT_MODEL" title="Object Model"></a><h4 class="jump">Object Model</h4><p>If you have changed your data model during development, your update will need to handle migrating any data stores to use the new model.</p><p>The simplest approach is to use <span class="content_text"><a href="../../documentation/cocoa/conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html" class="browserLink" >Lightweight Migration</a></span>. This is the least code, and the usually the most effecient way of migrating a data store.</p><p>To enable automatic lightweight migration, add YES under the NSMigratePersistentStoresAutomaticallyOption and NSInferMappingModelAutomaticallyOption keys in the options: dictionary that you pass to <code>addPersistentStoreWithType:configuration:URL:options:error:</code> when setting up your Core Data stack.</p><a name="//apple_ref/doc/uid/DTS40011323-CH1-SOURCECODE1" title="Listing 1Setting Up Automatic Lightweight Migration"></a><p class="codesample clear"><strong class="caption_number">Listing 1</strong>&nbsp;&nbsp;Setting Up Automatic Lightweight Migration</p><div class="codesample clear"><table><tr><td scope="row"><pre>NSError *error;<span></span></pre></td></tr><tr><td scope="row"><pre>NSURL *storeURL = &lt;#The URL of a persistent store#&gt;;<span></span></pre></td></tr><tr><td scope="row"><pre>NSPersistentStoreCoordinator *psc = &lt;#The coordinator#&gt;;<span></span></pre></td></tr><tr><td scope="row"><pre>NSDictionary *options = @{NSMigratePersistentStoresAutomaticallyOption : @YES,<span></span></pre></td></tr><tr><td scope="row"><pre>                          NSInferMappingModelAutomaticallyOption : @YES};<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>if (![psc addPersistentStoreWithType:&lt;#Store type#&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    configuration:&lt;#Configuration or nil#&gt; URL:storeURL<span></span></pre></td></tr><tr><td scope="row"><pre>    options:options error:&amp;error]) {<span></span></pre></td></tr><tr><td scope="row"><pre>    // Handle the error.<span></span></pre></td></tr><tr><td scope="row"><pre>   NSLog(@"error: %@ %@", error, [error userInfo]);<span></span></pre></td></tr><tr><td scope="row"><pre>   abort();<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The <span class="content_text"><a href="../../documentation/Cocoa/Conceptual/CoreDataVersioning/index.html" class="browserLink" >Core Data Model Versioning and Data Migration Programming Guide</a></span> is the definitive discussion of migrating your data.</p></section><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-GOTCHAS_CORE_DATA-CACHES" title="Caches"></a><h4 class="jump">Caches</h4><p>If you use NSFetchedResultsController and have enabled caching, you will also need to clear the cache after updating your model, by using <span class="content_text"><a href="../../documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#/apple_ref/occ/clm/NSFetchedResultsController/deleteCacheWithName:" class="browserLink" >+deleteCacheWithName:</a></span> before creating your fetched results controller.</p><p>NSFetchedResultsController uses a cache if you pass anything other than nil for the cacheName: parameter of <span class="content_text"><a href="../../documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#/apple_ref/doc/uid/TP40008227-CH1-SW1" class="browserLink" >-initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:</a></span>.</p></section></section><div class="back_to_top"><a href="_index.html#top">Back to Top</a></div></section><section><a name="//apple_ref/doc/uid/DTS40011323-CH1-DEBUGGING" title="Debugging Ad Hoc Builds"></a><h2 class="jump">Debugging Ad Hoc Builds</h2><p>If a problem only reproduces in an Ad Hoc build, you'll need to analyze Crash Logs and Console output from the device to debug it. <span class="content_text"><a href="../../qa/qa1747/index.html" class="urlLink" rel="external">Debugging Deployed iOS Apps</a></span> explains how to gather this information. See <span class="content_text"><a href="../../index.html#technotes/tn2151/_index.html" class="urlLink" rel="external">Understanding and Analyzing iOS Application Crash Reports</a></span> and the <span class="content_text"><a href="../../../../videos/wwdc/2010/index-id=317.html" class="urlLink" rel="external">Understanding Crash Reports on iOS</a></span> WWDC Session for tips on interpreting it.</p><p>After testing an archived build to your satisfaction, you can submit it to the App Store, <span class="content_text"><a href="../../documentation/ToolsLanguages/Conceptual/Xcode_Overview/About_Xcode/about.html" class="urlLink" rel="external">by following these steps</a></span>.</p><div class="back_to_top"><a href="_index.html#top">Back to Top</a></div></section><br/><hr/><a name="//apple_ref/doc/uid/DTS40011323-CH1-DontLinkElementID_1" title="Document Revision History"></a><a name="//apple_ref/doc/uid/DTS40011323-RevisionHistory-DontLinkElementID_1" title="Document Revision History"></a><h4>Document Revision History</h4><br/><table class="graybox revision-history" border="0" cellspacing="0" cellpadding="5"><colgroup span="1"><col width="145" /></colgroup><tr><th scope="col" align="left"><strong>Date</strong></th><th scope="col" align="left"><strong>Notes</strong></th></tr><tr><td scope="row">2013-02-13</td><td><p>Editorial changes.</p></td></tr><tr><td scope="row">2011-10-27</td><td><p>New document that 
					discusses some best practices for testing an update to an iOS app that has already been deployed through the App Store.</p></td></tr></table><br/>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2013 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2013-02-13</p></div></div>

        <!-- /CONTENTS -->
        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <input id="email" type="email" name="email" placeholder="Email (optional)" size="48">

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="../../../../bug-reporting/index.html" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../Resources/874/JavaScript/lib/prototype.js"></script>
    <script src="../../Resources/874/JavaScript/library.js"></script>
    <script src="../../Resources/874/JavaScript/feedback.js"></script>
</body>
<script type="text/javascript" src="../../../webstats/pagetracker.js"></script>
<script type="text/javascript">
if(typeof PageTracker !== 'undefined') {
  if(window.addEventListener) {
    window.addEventListener("load", function(){PageTracker.logPageLoad()},false);
  } else if(window.attachEvent) {
    window.attachEvent("onload",function(){PageTracker.logPageLoad()});
  }
}
</script>
</html>
